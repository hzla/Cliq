<div class="event-modal">
	<div class="event-form-header">
			<div class="header-profile">
				<div class="head-3 white" id="sending">Open Event Setup</div>
			</div>
	</div>

	<%= form_for [@event], :class => 'event-form', remote: true do |f| %>
		
		<div class="form-row first">
			<!-- <div class="event-form-label head-3 dark-gray">What:</div>  -->
			<%= f.text_field :title, :class => "form-input", placeholder: "What's happening?" %>
		</div>
		
		<div class="form-row">
			<!-- <div class="event-form-label head-3 dark-gray">Where:</div>  -->
			<%= f.text_field :location, :class => "form-input", placeholder: 'Where?' %>
		</div>
		
		<div class="form-row">
			<!-- <div class="event-form-label head-3 dark-gray">When:</div>  -->
			<%= f.datetime_select("start_time", discard_year: true, default: Time.now) %> 
		</div>
		
		<div class="form-row">
			<!-- <div class="event-form-label head-3 dark-gray">More Info:</div>  -->
			<div id="quantity-select"> 
				<%= f.text_area :description, :class => 'form-input', placeholder: "Any Details?" %>
			</div>
		</div>
		
		<div class="form-row">
			<div class="event-form-label event_pic_upload">Upload Image:</div>
			  <%= f.file_field :image, :class => 'form-input-upload', id: "imgInp" %> 
			  <div id="upload-button"><div class="btn-text">Browse Files...</div></div>
		</div>

		<div class="form-row optional">
			<div class="event-form-label event_pic_upload">(Optional)</div>
			
		</div>


		

		<div class="form-row last">	
			<div id="send-invite">
				<%= f.submit "SET IT LOOSE", id: "invite-submit" %>
			</div>
			<img id="preview" src="#" alt="preview failed to load" class="hidden" /> 
		</div>
	<% end %>
</div>


<script>

	function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        
        reader.onload = function (e) {
            $('#preview').show()
            $('#preview').attr('src', e.target.result);
            $('#invite-submit').val('SET IT LOOSE')
        }
        
        reader.readAsDataURL(input.files[0]);
    }
  }
    
  $("#imgInp").change(function(){
      $('#invite-submit').val('Uploading...')
      readURL(this);
  });
</script>
<script>
  $('img.svg').each(function(){
    var $img = $(this);
    var imgID = $img.attr('id');
    var imgClass = $img.attr('class');
    var imgURL = $img.attr('src');

    $.get(imgURL, function(data) {
        // Get the SVG tag, ignore the rest
        var $svg = $(data).find('svg');

        // Add replaced image's ID to the new SVG
        if(typeof imgID !== 'undefined') {
            $svg = $svg.attr('id', imgID);
        }
        // Add replaced image's classes to the new SVG
        if(typeof imgClass !== 'undefined') {
            $svg = $svg.attr('class', imgClass+' replaced-svg');
        }
        // Remove any invalid XML tags as per http://validator.w3.org
        $svg = $svg.removeAttr('xmlns:a');
        // Replace image with new SVG
        $img.replaceWith($svg);
    }, 'xml');
  });
    $(".invite-modal-container").css({top: "", left: "", marginTop: "", marginLeft: ""})
</script>